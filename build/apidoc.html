<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://stub.by"

    >stubby (v4.0.0)</a>
</h1>
<h4>a lightweight server for stubbing external systems and endpoints</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby">module stubby</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby">
            function <span class="apidocSignatureSpan">stubby.</span>Stubby
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.endpoint">
            function <span class="apidocSignatureSpan">stubby.</span>endpoint
            <span class="apidocSignatureSpan">(endpoint, datadir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.watch">
            function <span class="apidocSignatureSpan">stubby.</span>watch
            <span class="apidocSignatureSpan">(endpoints, filename)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>Stubby.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>admin</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>args</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>cli</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>endpoint.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>endpoints</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>out</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>portal</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>prettyprint</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>stubs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.</span>watch.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.Stubby">module stubby.Stubby</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.Stubby">
            function <span class="apidocSignatureSpan">stubby.</span>Stubby
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.Stubby.prototype">module stubby.Stubby.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.delete">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>delete
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.get">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>get
            <span class="apidocSignatureSpan">(id, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.post">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>post
            <span class="apidocSignatureSpan">(data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.put">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>put
            <span class="apidocSignatureSpan">(id, data, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.start">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>start
            <span class="apidocSignatureSpan">(o, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.Stubby.prototype.stop">
            function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>stop
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.admin">module stubby.admin</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.admin.Admin">
            function <span class="apidocSignatureSpan">stubby.admin.</span>Admin
            <span class="apidocSignatureSpan">(endpoints)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.args">module stubby.args</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.args.helpText">
            function <span class="apidocSignatureSpan">stubby.args.</span>helpText
            <span class="apidocSignatureSpan">(options, programName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.args.parse">
            function <span class="apidocSignatureSpan">stubby.args.</span>parse
            <span class="apidocSignatureSpan">(options, argv)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.cli">module stubby.cli</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.cert">
            function <span class="apidocSignatureSpan">stubby.cli.</span>cert
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.data">
            function <span class="apidocSignatureSpan">stubby.cli.</span>data
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.getArgs">
            function <span class="apidocSignatureSpan">stubby.cli.</span>getArgs
            <span class="apidocSignatureSpan">(argv)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.help">
            function <span class="apidocSignatureSpan">stubby.cli.</span>help
            <span class="apidocSignatureSpan">(go)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.key">
            function <span class="apidocSignatureSpan">stubby.cli.</span>key
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.pfx">
            function <span class="apidocSignatureSpan">stubby.cli.</span>pfx
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.readFile">
            function <span class="apidocSignatureSpan">stubby.cli.</span>readFile
            <span class="apidocSignatureSpan">(flag, option, filename, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.cli.version">
            function <span class="apidocSignatureSpan">stubby.cli.</span>version
            <span class="apidocSignatureSpan">(go)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">stubby.cli.</span>options</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.endpoint">module stubby.endpoint</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.endpoint.endpoint">
            function <span class="apidocSignatureSpan">stubby.</span>endpoint
            <span class="apidocSignatureSpan">(endpoint, datadir)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.endpoint.prototype">module stubby.endpoint.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.endpoint.prototype.matches">
            function <span class="apidocSignatureSpan">stubby.endpoint.prototype.</span>matches
            <span class="apidocSignatureSpan">(request)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.endpoints">module stubby.endpoints</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.endpoints.Endpoints">
            function <span class="apidocSignatureSpan">stubby.endpoints.</span>Endpoints
            <span class="apidocSignatureSpan">(data, callback, datadir)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.out">module stubby.out</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">stubby.out.</span>quiet</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.dump">
            function <span class="apidocSignatureSpan">stubby.out.</span>dump
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.error">
            function <span class="apidocSignatureSpan">stubby.out.</span>error
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.incoming">
            function <span class="apidocSignatureSpan">stubby.out.</span>incoming
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.info">
            function <span class="apidocSignatureSpan">stubby.out.</span>info
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.log">
            function <span class="apidocSignatureSpan">stubby.out.</span>log
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.notice">
            function <span class="apidocSignatureSpan">stubby.out.</span>notice
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.ok">
            function <span class="apidocSignatureSpan">stubby.out.</span>ok
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.status">
            function <span class="apidocSignatureSpan">stubby.out.</span>status
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.trace">
            function <span class="apidocSignatureSpan">stubby.out.</span>trace
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.out.warn">
            function <span class="apidocSignatureSpan">stubby.out.</span>warn
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.portal">module stubby.portal</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.portal.Portal">
            function <span class="apidocSignatureSpan">stubby.portal.</span>Portal
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.prettyprint">module stubby.prettyprint</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.prettyprint.spacing">
            function <span class="apidocSignatureSpan">stubby.prettyprint.</span>spacing
            <span class="apidocSignatureSpan">(length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.prettyprint.wrap">
            function <span class="apidocSignatureSpan">stubby.prettyprint.</span>wrap
            <span class="apidocSignatureSpan">(tokens, continuation, columns)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.stubs">module stubby.stubs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.stubs.Stubs">
            function <span class="apidocSignatureSpan">stubby.stubs.</span>Stubs
            <span class="apidocSignatureSpan">(endpoints)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.watch">module stubby.watch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.watch.watch">
            function <span class="apidocSignatureSpan">stubby.</span>watch
            <span class="apidocSignatureSpan">(endpoints, filename)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.stubby.watch.prototype">module stubby.watch.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.watch.prototype.activate">
            function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>activate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.watch.prototype.deactivate">
            function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>deactivate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.stubby.watch.prototype.refresh">
            function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>refresh
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby" id="apidoc.module.stubby">module stubby</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.Stubby" id="apidoc.element.stubby.Stubby">
        function <span class="apidocSignatureSpan">stubby.</span>Stubby
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stubby() {
  this.endpoints = new Endpoints();
  this.stubsPortal = null;
  this.tlsPortal = null;
  this.adminPortal = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.endpoint" id="apidoc.element.stubby.endpoint">
        function <span class="apidocSignatureSpan">stubby.</span>endpoint
        <span class="apidocSignatureSpan">(endpoint, datadir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Endpoint(endpoint, datadir) {
  if (endpoint == null) { endpoint = {}; }
  if (datadir == null) { datadir = process.cwd(); }

  Object.defineProperty(this, &#x27;datadir&#x27;, {value: datadir});

  this.request = purifyRequest(endpoint.request);
  this.response = purifyResponse(this, endpoint.response);
  this.hits = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.watch" id="apidoc.element.stubby.watch">
        function <span class="apidocSignatureSpan">stubby.</span>watch
        <span class="apidocSignatureSpan">(endpoints, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watcher(endpoints, filename) {
  var shasum;

  this.endpoints = endpoints;
  this.filename = filename;

  shasum = crypto.createHash(&#x27;sha1&#x27;);
  shasum.update(fs.readFileSync(this.filename, &#x27;utf8&#x27;));

  this.sha = shasum.digest(&#x27;hex&#x27;);
  this.activate();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>
























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.Stubby" id="apidoc.module.stubby.Stubby">module stubby.Stubby</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.Stubby.Stubby" id="apidoc.element.stubby.Stubby.Stubby">
        function <span class="apidocSignatureSpan">stubby.</span>Stubby
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stubby() {
  this.endpoints = new Endpoints();
  this.stubsPortal = null;
  this.tlsPortal = null;
  this.adminPortal = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.Stubby.prototype" id="apidoc.module.stubby.Stubby.prototype">module stubby.Stubby.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.delete" id="apidoc.element.stubby.Stubby.prototype.delete">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>delete
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delete = function (id, callback) {
  var self = this;

  if (id == null) { id = noop; }
  if (callback == null) { callback = id; }

  setTimeout(function () {
    if (typeof id === &#x27;function&#x27;) {
      delete self.endpoints.db;
      self.endpoints.db = {};
      callback();
    } else {
      self.endpoints.delete(id, callback);
    }
  }, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var CLI = require(&#x27;../src/console/cli&#x27;);
var stubby = new (require(&#x27;../src/main&#x27;).Stubby);
var options = CLI.getArgs();

stubby.start(options);

process.on(&#x27;SIGHUP&#x27;, function() {
  stubby.<span class="apidocCodeKeywordSpan">delete</span>(function () { stubby.start(options); });
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.get" id="apidoc.element.stubby.Stubby.prototype.get">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>get
        <span class="apidocSignatureSpan">(id, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (id, callback) {
  var self = this;

  if (id == null) { id = noop; }
  if (callback == null) { callback = id; }

  setTimeout(function () {
    if (typeof id === &#x27;function&#x27;) { self.endpoints.gather(callback); } else { self.endpoints.retrieve(id, callback); }
  }, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.post" id="apidoc.element.stubby.Stubby.prototype.post">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>post
        <span class="apidocSignatureSpan">(data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">post = function (data, callback) {
  var self = this;

  if (callback == null) { callback = noop; }

  setTimeout(function () {
    if (contract(data)) { callback(couldNotSave); } else { self.endpoints.create(data, callback); }
  }, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.put" id="apidoc.element.stubby.Stubby.prototype.put">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>put
        <span class="apidocSignatureSpan">(id, data, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function (id, data, callback) {
  var self = this;

  if (callback == null) { callback = noop; }

  setTimeout(function () {
    if (contract(data)) { callback(couldNotSave); } else { self.endpoints.update(id, data, callback); }
  }, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.start" id="apidoc.element.stubby.Stubby.prototype.start">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>start
        <span class="apidocSignatureSpan">(o, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (o, cb) {
  var oc = setupStartOptions(o, cb);
  var options = oc[0];
  var callback = oc[1];
  var self = this;

  this.stop(function () {
    var errors = contract(options.data);

    if (errors) { return callback(errors); }
    if (options.datadir != null) { self.endpoints.datadir = options.datadir; }

    self.endpoints.create(options.data, onEndpointLoaded);

    self.tlsPortal = https.createServer(createHttpsOptions(options), new Stubs(self.endpoints).server);
    self.tlsPortal.on(&#x27;listening&#x27;, function () { onListening(&#x27;Stubs&#x27;, options.tls, &#x27;https&#x27;, options.location); });
    self.tlsPortal.on(&#x27;error&#x27;, function (err) { onError(err, options.tls, options.location); });
    self.tlsPortal.listen(options.tls, options.location);

    self.stubsPortal = http.createServer(new Stubs(self.endpoints).server);
    self.stubsPortal.on(&#x27;listening&#x27;, function () { onListening(&#x27;Stubs&#x27;, options.stubs, &#x27;http&#x27;, options.location); });
    self.stubsPortal.on(&#x27;error&#x27;, function (err) { onError(err, options.stubs, options.location); });
    self.stubsPortal.listen(options.stubs, options.location);

    self.adminPortal = http.createServer(new Admin(self.endpoints).server);
    self.adminPortal.on(&#x27;listening&#x27;, function () { onListening(&#x27;Admin&#x27;, options.admin, &#x27;http&#x27;, options.location); });
    self.adminPortal.on(&#x27;error&#x27;, function (err) { onError(err, options.admin, options.location); });
    self.adminPortal.listen(options.admin, options.location);

    if (options.watch) { self.watcher = new Watcher(self.endpoints, options.watch); }

    out.info(&#x27;\nQuit: ctrl-c\n&#x27;);
    callback();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Then within your project files you can do something like:

```javascript
    var Stubby = require(&#x27;stubby&#x27;).Stubby;
    var mockService = new Stubby();

    mockService.<span class="apidocCodeKeywordSpan">start</span>();
```

What can I do with it, you ask? Read on!

#### start(options, [callback])

* `options`: an object containing parameters with which to start this stubby. Parameters go along with the full-name flags used
from the command line.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.Stubby.prototype.stop" id="apidoc.element.stubby.Stubby.prototype.stop">
        function <span class="apidocSignatureSpan">stubby.Stubby.prototype.</span>stop
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function (callback) {
  var self = this;

  if (callback == null) { callback = noop; }

  setTimeout(function () {
    if (self.watcher != null) { self.watcher.deactivate(); }

    async.parallel({
      closeAdmin: function (cb) {
        if (self.adminPortal &#x26;&#x26; self.adminPortal.address()) { self.adminPortal.close(cb); } else { cb(); }
      },
      closeStubs: function (cb) {
        if (self.stubsPortal &#x26;&#x26; self.stubsPortal.address()) { self.stubsPortal.close(cb); } else { cb(); }
      },
      closeTls: function (cb) {
        if (self.tlsPortal &#x26;&#x26; self.tlsPortal.address()) { self.tlsPortal.close(cb); } else { return cb(); }
      }
    }, callback);
  }, 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Stubby.prototype.start = function (o, cb) {
  var oc = setupStartOptions(o, cb);
  var options = oc[0];
  var callback = oc[1];
  var self = this;

  this.<span class="apidocCodeKeywordSpan">stop</span>(function () {
var errors = contract(options.data);

if (errors) { return callback(errors); }
if (options.datadir != null) { self.endpoints.datadir = options.datadir; }

self.endpoints.create(options.data, onEndpointLoaded);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.admin" id="apidoc.module.stubby.admin">module stubby.admin</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.admin.Admin" id="apidoc.element.stubby.admin.Admin">
        function <span class="apidocSignatureSpan">stubby.admin.</span>Admin
        <span class="apidocSignatureSpan">(endpoints)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Admin(endpoints) {
  Portal.call(this);
  this.server = this.server.bind(this);
  this.endpoints = endpoints;
  this.contract = contract;
  this.name = &#x27;[admin]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.args" id="apidoc.module.stubby.args">module stubby.args</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.args.helpText" id="apidoc.element.stubby.args.helpText">
        function <span class="apidocSignatureSpan">stubby.args.</span>helpText
        <span class="apidocSignatureSpan">(options, programName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function helpText(options, programName) {
  var inlineList = [];
  var firstColumn = {};
  var helpLines = [];
  var gutter = 3;

  options.forEach(function (option) {
    var param = option.param != null
                ? &#x27; &#x3c;&#x27; + option.param + &#x27;&#x3e;&#x27;
                : &#x27;&#x27;;

    firstColumn[option.name] = &#x27;-&#x27; + option.flag + &#x27;, --&#x27; + option.name + param;
    inlineList.push(&#x27;[-&#x27; + option.flag + param + &#x27;]&#x27;);
    gutter = Math.max(gutter, firstColumn[option.name].length + 3);
  });

  options.forEach(function (option) {
    var helpLine = firstColumn[option.name];
    helpLine += pp.spacing(gutter - helpLine.length);
    helpLine += pp.wrap(option.description.split(&#x27; &#x27;), gutter);
    helpLines.push(helpLine);
  });

  return programName + &#x27; &#x27; + pp.wrap(inlineList, programName.length + 1) + &#x27;\n\n&#x27; + helpLines.join(&#x27;\n&#x27;);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
description: &#x27;Auto-reload data file when edits are made.&#x27;
}];

function help(go) {
if (go == null) { go = false; }
if (!go) { return; }

out.log(args.<span class="apidocCodeKeywordSpan">helpText</span>(options, &#x27;stubby&#x27;));
process.exit();
}

function version(go) {
var ver = (require(&#x27;../../package.json&#x27;)).version;

if (!go) { return ver; }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.args.parse" id="apidoc.element.stubby.args.parse">
        function <span class="apidocSignatureSpan">stubby.args.</span>parse
        <span class="apidocSignatureSpan">(options, argv)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(options, argv) {
  var args = {};

  if (argv == null) { argv = process.argv; }

  options.forEach(function (option) {
    if (option.default == null) { option.default = null; }
    args[option.name || option.flag] = pullPassedValue(option, argv);
  });

  return args;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function getArgs(argv) {
var self = this; // eslint-disable-line
var params;

if (argv == null) { argv = process.argv; }

params = args.<span class="apidocCodeKeywordSpan">parse</span>(options, argv);
params.datadir = path.resolve(path.dirname(params.data || &#x27;.&#x27;));

if (params.watch) { params.watch = params.data; }

options.forEach(function (option) {
  if (self[option.name] != null) {
    params[option.name] = self[option.name](params[option.name]);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.cli" id="apidoc.module.stubby.cli">module stubby.cli</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.cli.cert" id="apidoc.element.stubby.cli.cert">
        function <span class="apidocSignatureSpan">stubby.cli.</span>cert
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function cert(file) { return readFile(&#x27;c&#x27;, &#x27;cert&#x27;, file, &#x27;pem&#x27;); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.data" id="apidoc.element.stubby.cli.data">
        function <span class="apidocSignatureSpan">stubby.cli.</span>data
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function data(filename) {
  var filedata;

  if (filename === null) { return []; }

  try {
    filedata = (fs.readFileSync(filename, &#x27;utf8&#x27;)).trim();
  } catch (e) {
    out.warn(&#x27;File &#x22;&#x27; + filename + &#x27;&#x22; could not be found. Ignoring...&#x27;);
    return [];
  }

  try {
    return yaml.load(filedata);
  } catch (e) {
    out.warn(&#x27;Couldn\&#x27;t parse &#x22;&#x27; + filename + &#x27;&#x22; due to syntax errors:&#x27;);
    out.log(e.message);
    process.exit(0);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.getArgs" id="apidoc.element.stubby.cli.getArgs">
        function <span class="apidocSignatureSpan">stubby.cli.</span>getArgs
        <span class="apidocSignatureSpan">(argv)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getArgs(argv) {
  var self = this; // eslint-disable-line
  var params;

  if (argv == null) { argv = process.argv; }

  params = args.parse(options, argv);
  params.datadir = path.resolve(path.dirname(params.data || &#x27;.&#x27;));

  if (params.watch) { params.watch = params.data; }

  options.forEach(function (option) {
    if (self[option.name] != null) {
      params[option.name] = self[option.name](params[option.name]);
    }
  });

  return params;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



#!/usr/bin/env node

var CLI = require(&#x27;../src/console/cli&#x27;);
var stubby = new (require(&#x27;../src/main&#x27;).Stubby);
var options = CLI.<span class="apidocCodeKeywordSpan">getArgs</span>();

stubby.start(options);

process.on(&#x27;SIGHUP&#x27;, function() {
  stubby.delete(function () { stubby.start(options); });
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.help" id="apidoc.element.stubby.cli.help">
        function <span class="apidocSignatureSpan">stubby.cli.</span>help
        <span class="apidocSignatureSpan">(go)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function help(go) {
  if (go == null) { go = false; }
  if (!go) { return; }

  out.log(args.helpText(options, &#x27;stubby&#x27;));
  process.exit();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.key" id="apidoc.element.stubby.cli.key">
        function <span class="apidocSignatureSpan">stubby.cli.</span>key
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function key(file) { return readFile(&#x27;k&#x27;, &#x27;key&#x27;, file, &#x27;pem&#x27;); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.pfx" id="apidoc.element.stubby.cli.pfx">
        function <span class="apidocSignatureSpan">stubby.cli.</span>pfx
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pfx(file) { return readFile(&#x27;p&#x27;, &#x27;pfx&#x27;, file, &#x27;pfx&#x27;); }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.readFile" id="apidoc.element.stubby.cli.readFile">
        function <span class="apidocSignatureSpan">stubby.cli.</span>readFile
        <span class="apidocSignatureSpan">(flag, option, filename, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function readFile(flag, option, filename, type) {
  var filedata, extension;

  if (filename === null) { return null; }

  filedata = fs.readFileSync(filename, &#x27;utf8&#x27;);
  extension = filename.replace(/^.*\.([a-zA-Z0-9]+)$/, &#x27;$1&#x27;);

  if (!filedata) { return null; }

  if (extension !== type) {
    out.warn(&#x27;[-&#x27; + flag + &#x27;, --&#x27; + option + &#x27;] only takes files of type .&#x27; + type + &#x27;. Ignoring...&#x27;);
    return null;
  }

  return filedata.trim();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.cli.version" id="apidoc.element.stubby.cli.version">
        function <span class="apidocSignatureSpan">stubby.cli.</span>version
        <span class="apidocSignatureSpan">(go)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function version(go) {
  var ver = (require(&#x27;../../package.json&#x27;)).version;

  if (!go) { return ver; }

  out.log(ver);
  process.exit();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Portal.prototype.received = function (request, response) {
  var date = new Date();
  var hours = (&#x27;0&#x27; + date.getHours()).slice(-2);
  var minutes = (&#x27;0&#x27; + date.getMinutes()).slice(-2);
  var seconds = (&#x27;0&#x27; + date.getSeconds()).slice(-2);

  out.incoming(hours + &#x27;:&#x27; + minutes + &#x27;:&#x27; + seconds + &#x27; -&#x3e; &#x27; + request.method + &#x27; &#x27
; + this.name + request.url);
  response.setHeader(&#x27;Server&#x27;, &#x27;stubby/&#x27; + CLI.<span class="apidocCodeKeywordSpan">version</span>() + &#x27;
node/&#x27; + process.version + &#x27; (&#x27; + process.platform + &#x27; &#x27; + process.arch + &#x27;)&#x27;);

  if (request.headers.origin != null) {
response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, request.headers.origin);
response.setHeader(&#x27;Access-Control-Allow-Credentials&#x27;, true);

if (request.headers[&#x27;access-control-request-headers&#x27;] != null) {
  response.setHeader(&#x27;Access-Control-Allow-Headers&#x27;, request.headers[&#x27;access-control-request-headers&#x27;]);
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.endpoint" id="apidoc.module.stubby.endpoint">module stubby.endpoint</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.endpoint.endpoint" id="apidoc.element.stubby.endpoint.endpoint">
        function <span class="apidocSignatureSpan">stubby.</span>endpoint
        <span class="apidocSignatureSpan">(endpoint, datadir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Endpoint(endpoint, datadir) {
  if (endpoint == null) { endpoint = {}; }
  if (datadir == null) { datadir = process.cwd(); }

  Object.defineProperty(this, &#x27;datadir&#x27;, {value: datadir});

  this.request = purifyRequest(endpoint.request);
  this.response = purifyResponse(this, endpoint.response);
  this.hits = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.endpoint.prototype" id="apidoc.module.stubby.endpoint.prototype">module stubby.endpoint.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.endpoint.prototype.matches" id="apidoc.element.stubby.endpoint.prototype.matches">
        function <span class="apidocSignatureSpan">stubby.endpoint.prototype.</span>matches
        <span class="apidocSignatureSpan">(request)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">matches = function (request) {
  var file, post, json, upperMethods;
  var matches = {};

  matches.url = matchRegex(this.request.url, request.url);
  if (!matches.url) { return null; }

  matches.headers = compareHashMaps(this.request.headers, request.headers);
  if (!matches.headers) { return null; }

  matches.query = compareHashMaps(this.request.query, request.query);
  if (!matches.query) { return null; }

  file = null;
  if (this.request.file != null) {
    try {
      file = fs.readFileSync(path.resolve(this.datadir, this.request.file), &#x27;utf8&#x27;);
    } catch (e) { /* ignored */ }
  }

  post = file || this.request.post;
  if (post &#x26;&#x26; request.post) {
    matches.post = matchRegex(normalizeEOL(post), normalizeEOL(request.post));
    if (!matches.post) { return null; }
  } else if (this.request.json &#x26;&#x26; request.post) {
    try {
      json = JSON.parse(request.post);
      if (!compareObjects(this.request.json, json)) { return null; }
    } catch (e) {
      return null;
    }
  }

  if (this.request.method instanceof Array) {
    upperMethods = this.request.method.map(function (it) { return it.toUpperCase(); });
    if (upperMethods.indexOf(request.method) === -1) { return null; }
  } else if (this.request.method.toUpperCase() !== request.method) {
    return null;
  }

  return matches;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var id, endpoint, captures, matched;
if (callback == null) { callback = noop; }

for (id in this.db) {
  if (!this.db.hasOwnProperty(id)) { continue; }

  endpoint = this.db[id];
  captures = endpoint.<span class="apidocCodeKeywordSpan">matches</span>(data);

  if (!captures) { continue; }

  endpoint.hits++;
  matched = clone(endpoint);
  return this.found(matched, captures, callback);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.endpoints" id="apidoc.module.stubby.endpoints">module stubby.endpoints</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.endpoints.Endpoints" id="apidoc.element.stubby.endpoints.Endpoints">
        function <span class="apidocSignatureSpan">stubby.endpoints.</span>Endpoints
        <span class="apidocSignatureSpan">(data, callback, datadir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Endpoints(data, callback, datadir) {
  if (callback == null) { callback = noop; }
  if (datadir == null) { datadir = process.cwd(); }

  this.datadir = datadir;
  this.db = {};
  this.lastId = 0;
  this.create(data, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.out" id="apidoc.module.stubby.out">module stubby.out</a></h1>




    <h2>
        <a href="#apidoc.element.stubby.out.dump" id="apidoc.element.stubby.out.dump">
        function <span class="apidocSignatureSpan">stubby.out.</span>dump
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dump = function (data) {
  if (this.quiet) { return; }
  console.dir(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.error" id="apidoc.element.stubby.out.error">
        function <span class="apidocSignatureSpan">stubby.out.</span>error
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (msg) {
  if (this.quiet) { return; }
  console.error(RED + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      break;
    case &#x27;EADDRNOTAVAIL&#x27;:
      msg = &#x27;Host &#x22;&#x27; + location + &#x27;&#x22; is not available! Exiting...&#x27;;
      break;
    default:
      msg = err.message + &#x27;. Exiting...&#x27;;
  }
  out.<span class="apidocCodeKeywordSpan">error</span>(msg);
  console.dir(err); // eslint-disable-line
  process.exit();
}

function onEndpointLoaded(err, endpoint) {
  out.notice(&#x27;Loaded: &#x27; + endpoint.request.method + &#x27; &#x27; + endpoint.request.url);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.incoming" id="apidoc.element.stubby.out.incoming">
        function <span class="apidocSignatureSpan">stubby.out.</span>incoming
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">incoming = function (msg) {
  if (this.quiet) { return; }
  console.log(CYAN + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Portal.prototype.received = function (request, response) {
  var date = new Date();
  var hours = (&#x27;0&#x27; + date.getHours()).slice(-2);
  var minutes = (&#x27;0&#x27; + date.getMinutes()).slice(-2);
  var seconds = (&#x27;0&#x27; + date.getSeconds()).slice(-2);

  out.<span class="apidocCodeKeywordSpan">incoming</span>(hours + &#x27;:&#x27; + minutes + &#x27;:&#x27; + seconds + &#x27; -&#
x3e; &#x27; + request.method + &#x27; &#x27; + this.name + request.url);
  response.setHeader(&#x27;Server&#x27;, &#x27;stubby/&#x27; + CLI.version() + &#x27; node/&#x27; + process.version + &#x27; (&#
x27; + process.platform + &#x27; &#x27; + process.arch + &#x27;)&#x27;);

  if (request.headers.origin != null) {
response.setHeader(&#x27;Access-Control-Allow-Origin&#x27;, request.headers.origin);
response.setHeader(&#x27;Access-Control-Allow-Credentials&#x27;, true);

if (request.headers[&#x27;access-control-request-headers&#x27;] != null) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.info" id="apidoc.element.stubby.out.info">
        function <span class="apidocSignatureSpan">stubby.out.</span>info
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (msg) {
  if (this.quiet) { return; }
  console.info(BLUE + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  self.adminPortal = http.createServer(new Admin(self.endpoints).server);
  self.adminPortal.on(&#x27;listening&#x27;, function () { onListening(&#x27;Admin&#x27;, options.admin, &#x27;http&#x27;, options
.location); });
  self.adminPortal.on(&#x27;error&#x27;, function (err) { onError(err, options.admin, options.location); });
  self.adminPortal.listen(options.admin, options.location);

  if (options.watch) { self.watcher = new Watcher(self.endpoints, options.watch); }

  out.<span class="apidocCodeKeywordSpan">info</span>(&#x27;\nQuit: ctrl-c\n&#x27;);
  callback();
});
};

Stubby.prototype.stop = function (callback) {
var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.log" id="apidoc.element.stubby.out.log">
        function <span class="apidocSignatureSpan">stubby.out.</span>log
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (msg) {
  if (this.quiet) { return; }
  console.log(msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
description: &#x27;Auto-reload data file when edits are made.&#x27;
}];

function help(go) {
if (go == null) { go = false; }
if (!go) { return; }

out.<span class="apidocCodeKeywordSpan">log</span>(args.helpText(options, &#x27;stubby&#x27;));
process.exit();
}

function version(go) {
var ver = (require(&#x27;../../package.json&#x27;)).version;

if (!go) { return ver; }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.notice" id="apidoc.element.stubby.out.notice">
        function <span class="apidocSignatureSpan">stubby.out.</span>notice
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notice = function (msg) {
  if (this.quiet) { return; }
  console.log(MAGENTA + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
out.error(msg);
console.dir(err); // eslint-disable-line
process.exit();
}

function onEndpointLoaded(err, endpoint) {
out.<span class="apidocCodeKeywordSpan">notice</span>(&#x27;Loaded: &#x27; + endpoint.request.method + &#x27; &#x27; + endpoint.
request.url);
}

function setupStartOptions(options, callback) {
var defaults, key;

options = options == null ? {} : options;
callback = callback == null ? noop : callback;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.ok" id="apidoc.element.stubby.out.ok">
        function <span class="apidocSignatureSpan">stubby.out.</span>ok
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ok = function (msg) {
  if (this.quiet) { return; }
  console.log(GREEN + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Admin.prototype.goGET = function (request, response) {
var callback;
var id = this.getId(request.url);
var self = this;

if (id) {
  callback = function (err, endpoint) {
    if (err) { self.notFound(response); } else { self.<span class="apidocCodeKeywordSpan">ok</span>(response, endpoint); }
  };

  return this.endpoints.retrieve(id, callback);
}

callback = function (err, data) {
  if (data.length === 0) { self.noContent(response); } else { self.ok(response, data); }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.status" id="apidoc.element.stubby.out.status">
        function <span class="apidocSignatureSpan">stubby.out.</span>status
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">status = function (msg) {
  if (this.quiet) { return; }
  console.log(BOLD + BLACK + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var contract = require(&#x27;./models/contract&#x27;);
var couldNotSave = &#x22;The supplied endpoint data couldn&#x27;t be saved&#x22;;

function noop() {}

function onListening(portal, port, protocol, location) {
if (protocol == null) { protocol = &#x27;http&#x27;; }
out.<span class="apidocCodeKeywordSpan">status</span>(portal + &#x27; portal running at &#x27; + protocol + &#x27;://&#x27; + location
 + &#x27;:&#x27; + port);
}

function onError(err, port, location) {
var msg;

switch (err.code) {
  case &#x27;EACCES&#x27;:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.trace" id="apidoc.element.stubby.out.trace">
        function <span class="apidocSignatureSpan">stubby.out.</span>trace
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function () {
  if (this.quiet) { return; }
  console.log(RED);
  console.trace();
  console.log(RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  notice: function (msg) {
    if (this.quiet) { return; }
    console.log(MAGENTA + msg + RESET);
  },
  trace: function () {
    if (this.quiet) { return; }
    console.log(RED);
    console.<span class="apidocCodeKeywordSpan">trace</span>();
    console.log(RESET);
  }
};

require(&#x27;./colorsafe&#x27;)(out);

module.exports = out;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.out.warn" id="apidoc.element.stubby.out.warn">
        function <span class="apidocSignatureSpan">stubby.out.</span>warn
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (msg) {
  if (this.quiet) { return; }
  console.warn(YELLOW + msg + RESET);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var filedata;

if (filename === null) { return []; }

try {
  filedata = (fs.readFileSync(filename, &#x27;utf8&#x27;)).trim();
} catch (e) {
  out.<span class="apidocCodeKeywordSpan">warn</span>(&#x27;File &#x22;&#x27; + filename + &#x27;&#x22; could not be found. Ignoring
...&#x27;);
  return [];
}

try {
  return yaml.load(filedata);
} catch (e) {
  out.warn(&#x27;Couldn\&#x27;t parse &#x22;&#x27; + filename + &#x27;&#x22; due to syntax errors:&#x27;);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.portal" id="apidoc.module.stubby.portal">module stubby.portal</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.portal.Portal" id="apidoc.element.stubby.portal.Portal">
        function <span class="apidocSignatureSpan">stubby.portal.</span>Portal
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Portal() {
  this.name = &#x27;portal&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.prettyprint" id="apidoc.module.stubby.prettyprint">module stubby.prettyprint</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.prettyprint.spacing" id="apidoc.element.stubby.prettyprint.spacing">
        function <span class="apidocSignatureSpan">stubby.prettyprint.</span>spacing
        <span class="apidocSignatureSpan">(length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function spacing(length) {
  if (length == null) { length = 0; }
  return &#x27; &#x27;.times(length);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    firstColumn[option.name] = &#x27;-&#x27; + option.flag + &#x27;, --&#x27; + option.name + param;
    inlineList.push(&#x27;[-&#x27; + option.flag + param + &#x27;]&#x27;);
    gutter = Math.max(gutter, firstColumn[option.name].length + 3);
  });

  options.forEach(function (option) {
    var helpLine = firstColumn[option.name];
    helpLine += pp.<span class="apidocCodeKeywordSpan">spacing</span>(gutter - helpLine.length);
    helpLine += pp.wrap(option.description.split(&#x27; &#x27;), gutter);
    helpLines.push(helpLine);
  });

  return programName + &#x27; &#x27; + pp.wrap(inlineList, programName.length + 1) + &#x27;\n\n&#x27; + helpLines.join(&#x27;\n&#
x27;);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.prettyprint.wrap" id="apidoc.element.stubby.prettyprint.wrap">
        function <span class="apidocSignatureSpan">stubby.prettyprint.</span>wrap
        <span class="apidocSignatureSpan">(tokens, continuation, columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function wrap(tokens, continuation, columns) {
  var wrapped, gutter;

  if (continuation == null) { continuation = 0; }
  if (columns == null) { columns = process.stdout.columns; }

  if (continuation + tokens.join(&#x27; &#x27;).length &#x3c;= columns) { return tokens.join(&#x27; &#x27;); }

  wrapped = &#x27;&#x27;;
  gutter = spacing(continuation);

  tokens.forEach(function (token) {
    var lengthSoFar = continuation + wrapped.replace(/\n/g, &#x27;&#x27;).length % columns || columns;

    if (lengthSoFar + token.length &#x3e; columns) {
      wrapped += &#x27;\n&#x27; + gutter + token;
    } else {
      wrapped += &#x27; &#x27; + token;
    }
  });

  return wrapped.trim();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    inlineList.push(&#x27;[-&#x27; + option.flag + param + &#x27;]&#x27;);
    gutter = Math.max(gutter, firstColumn[option.name].length + 3);
  });

  options.forEach(function (option) {
    var helpLine = firstColumn[option.name];
    helpLine += pp.spacing(gutter - helpLine.length);
    helpLine += pp.<span class="apidocCodeKeywordSpan">wrap</span>(option.description.split(&#x27; &#x27;), gutter);
    helpLines.push(helpLine);
  });

  return programName + &#x27; &#x27; + pp.wrap(inlineList, programName.length + 1) + &#x27;\n\n&#x27; + helpLines.join(&#x27;\n&#
x27;);
}

module.exports = {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.stubs" id="apidoc.module.stubby.stubs">module stubby.stubs</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.stubs.Stubs" id="apidoc.element.stubby.stubs.Stubs">
        function <span class="apidocSignatureSpan">stubby.stubs.</span>Stubs
        <span class="apidocSignatureSpan">(endpoints)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Stubs(endpoints) {
  Portal.call(this);
  this.server = this.server.bind(this);
  this.Endpoints = endpoints;
  this.name = &#x27;[stubs]&#x27;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.watch" id="apidoc.module.stubby.watch">module stubby.watch</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.watch.watch" id="apidoc.element.stubby.watch.watch">
        function <span class="apidocSignatureSpan">stubby.</span>watch
        <span class="apidocSignatureSpan">(endpoints, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Watcher(endpoints, filename) {
  var shasum;

  this.endpoints = endpoints;
  this.filename = filename;

  shasum = crypto.createHash(&#x27;sha1&#x27;);
  shasum.update(fs.readFileSync(this.filename, &#x27;utf8&#x27;));

  this.sha = shasum.digest(&#x27;hex&#x27;);
  this.activate();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.stubby.watch.prototype" id="apidoc.module.stubby.watch.prototype">module stubby.watch.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.stubby.watch.prototype.activate" id="apidoc.element.stubby.watch.prototype.activate">
        function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>activate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">activate = function () {
  if (watching) { return; }

  watching = true;
  out.status(&#x27;Watching for changes in &#x27; + this.filename + &#x27;...&#x27;);
  intervalId = setInterval(this.refresh.bind(this), interval);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this.endpoints = endpoints;
  this.filename = filename;

  shasum = crypto.createHash(&#x27;sha1&#x27;);
  shasum.update(fs.readFileSync(this.filename, &#x27;utf8&#x27;));

  this.sha = shasum.digest(&#x27;hex&#x27;);
  this.<span class="apidocCodeKeywordSpan">activate</span>();
}

Watcher.prototype.deactivate = function () {
  watching = false;
  return clearInterval(intervalId);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.watch.prototype.deactivate" id="apidoc.element.stubby.watch.prototype.deactivate">
        function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>deactivate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deactivate = function () {
  watching = false;
  return clearInterval(intervalId);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Stubby.prototype.stop = function (callback) {
  var self = this;

  if (callback == null) { callback = noop; }

  setTimeout(function () {
if (self.watcher != null) { self.watcher.<span class="apidocCodeKeywordSpan">deactivate</span>(); }

async.parallel({
  closeAdmin: function (cb) {
    if (self.adminPortal &#x26;&#x26; self.adminPortal.address()) { self.adminPortal.close(cb); } else { cb(); }
  },
  closeStubs: function (cb) {
    if (self.stubsPortal &#x26;&#x26; self.stubsPortal.address()) { self.stubsPortal.close(cb); } else { cb(); }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.stubby.watch.prototype.refresh" id="apidoc.element.stubby.watch.prototype.refresh">
        function <span class="apidocSignatureSpan">stubby.watch.prototype.</span>refresh
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">refresh = function () {
  var sha, errors;
  var shasum = crypto.createHash(&#x27;sha1&#x27;);
  var data = fs.readFileSync(this.filename, &#x27;utf8&#x27;);

  shasum.update(data);
  sha = shasum.digest(&#x27;hex&#x27;);

  if (sha !== this.sha) {
    try {
      data = yaml.load(data);
      errors = contract(data);

      if (errors) {
        out.error(errors);
      } else {
        this.endpoints.db = [];
        this.endpoints.create(data, function () {});
        out.notice(&#x27;&#x22;&#x27; + this.filename + &#x27;&#x22; was changed. It has been reloaded.&#x27;);
      }
    } catch (e) {
      out.warn(&#x27;Couldn\&#x27;t parse &#x22;&#x27; + this.filename + &#x27;&#x22; due to syntax errors:&#x27;);
      out.log(e.message);
    }
  }

  this.sha = sha;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
